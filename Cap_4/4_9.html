<html>

<head>
  <title>4.9</title>
  <script>
    /**
     * Define o método de assert
     */
    function assert(valor, mensagem) {
      var li = document.createElement('li')
      li.className = valor ? 'passou' : 'error'
      li.appendChild(document.createTextNode(mensagem))
      document.getElementById('resultado').appendChild(li)
    }

    /**
     * Memoização de valores previmente computados
     */

    window.onload = function () {

      function isPrime(value) {

        if (!isPrime.answers) isPrime.answers = {}
        if (isPrime.answers[value] != null) {
          return isPrime.answers[value]
        }


        var prime = value != 1

        for (var i = 2; i < value; i++) {
          if (value % i == 0) {
            prime = false
            break
          }
        }
        return isPrime.answers[value] = prime
      }

      assert(isPrime(5), '5 is prime')
      assert(isPrime.answers[5], 'The answer was cached!')

    }
  </script>
  <style>
    #resultado li.passou {
      color: green
    }

    #resultado li.error {
      color: red
    }
  </style>
</head>

<body>
  <ul id="resultado"></ul>
</body>

</html>